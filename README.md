# ğŸ¤– Opengravityï¼šåŸºäº AI çš„TUIå¼ä¸ªäººå·¥ä½œæµç®¡ç†ç³»ç»Ÿ

## âš ï¸ éå¸¸é‡è¦ï¼ï¼ï¼ï¼

 Opengravity çµæ„Ÿæ¥æºäº @bilibili/MarsLUL çš„ OrbitOS (ä¸€ä¸ªObsidiançš„å·¥ä½œæµç”Ÿäº§åŠ›æ’ä»¶)
 https://github.com/MarsWang42/OrbitOS
 ç»å¯¹æ¯” Opengravity æ›´ç¨³å®šå¯é 

 Opengravity æ˜¯æˆ‘åšäº†ç»™è‡ªå·±ç”¨çš„å°æ’ä»¶ï¼Œå¾ˆå¤šåœ°æ–¹æ²¡æœ‰ç»è¿‡ä¸¥è°¨çš„éªŒè¯ï¼Œè‚¯å®šå­˜åœ¨å¾ˆå¤šæ¶æ€§çš„bugï¼Œæˆ‘æ²¡æœ‰æ‰å®çš„æŠ€æœ¯èƒŒæ™¯ï¼Œå¤§éƒ¨åˆ†åŠŸèƒ½æ˜¯å’Œå¤§æ¨¡å‹èŠå¤©åŠ ä¸Šçš„
å¦‚æœä½ æ­£åœ¨è€ƒè™‘æŠŠ Opengravity æ”¾åˆ°è‡ªå·±çš„å·¥ä½œä¸­ï¼Œæˆ‘åŠä½ æ”¾å¼ƒï¼Œè¿™æ˜¯æˆ‘çš„ç©å…·ï¼Œä¸æ˜¯ä¸ªåˆæ ¼çš„å·¥å…·ã€‚

å½“ç„¶å¦‚æœä½ è§‰å¾—æˆ‘çš„æƒ³æ³•ä¸é”™ï¼Œä½ ä¹Ÿè§‰å¾—ä½ å¯ä»¥ç”¨è¿™ä¹ˆä¸€ä¸ªå·¥å…·ï¼Œé‚£ä½ å¯ä»¥éšæ„æ›´æ”¹ï¼Œä½ ç›´æ¥commitåˆ°æˆ‘çš„masteréƒ½å¯ä»¥

---

## ğŸ”¨ ä½¿ç”¨æŒ‡å—

å¦‚æœä½ åªæ˜¯çœ‹çœ‹çš„è¯ï¼Œè·³è¿‡è¿™ä¸€æ¡ï¼Œåé¢æ¯”è¾ƒå¥½ç¬‘

åˆå§‹åŒ–çš„æ—¶å€™ä¼šå»ºå‡ ä¸ªæ–‡ä»¶å¤¹ï¼š`codes`ã€`reviews`ã€`notes`ã€`daily`ã€`brainstorm`ã€`todo`
ç„¶åä½ å¯ä»¥åœ¨codesé‡Œé¢å·¥ä½œï¼Œnotesé‡Œé¢å†™ç¬”è®°ï¼Œdailyé‡Œé¢å†™æ—¥è®°ï¼ŒAIè¯»å–ä»¥åä¼šæŠŠcodereviewæ”¾åˆ°reviewsé‡Œé¢ï¼Œä½ ä¹Ÿå¯ä»¥è®©å®ƒå¤´è„‘é£æš´ä¸€ä¸‹æ”¾åˆ°brainstormé‡Œé¢ï¼Œæˆ–è€…è®©å®ƒå¸®ä½ æ•´ç†ä½ éœ€è¦åšçš„äº‹æƒ…æ”¾åˆ°todoé‡Œé¢æ¥å¼€å§‹ä½ çš„ä¸€å¤©ï¼Œå…·ä½“ä½ å¯ä»¥ç”¨è¿™äº›æŒ‡ä»¤ï¼š


1. å‘½ä»¤ï¼š`-codereview <æ–‡ä»¶è·¯å¾„>` æ‰§è¡Œä»£ç å®¡æŸ¥

2. å‘½ä»¤ï¼š`-brainstorm <ç¬”è®°è·¯å¾„>` æ‰©å±•ç»™å®šæƒ³æ³•

3. å‘½ä»¤ï¼š`good morning` ç”Ÿæˆæ¯æ—¥ç®€æŠ¥

4. å‘½ä»¤ï¼š`-reflect <ç¬”è®°è·¯å¾„>` å¯ä»¥åæ€ä¸€ä¸‹ç›¸å…³ç¬”è®°

5. å‘½ä»¤ï¼š`-link` å»ºè®®çŸ¥è¯†åº“å†…çš„è¿æ¥ã€‚

6. å‘½ä»¤ï¼š`-help` æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨å‘½ä»¤ã€‚

---

## ğŸ“œ é¡¹ç›®æ¦‚è¿°

Opengravity æ˜¯ä¸€ä¸ªåœ¨ VSCode ä¸­å¤§è‡´æ¨¡æ‹Ÿä¸‹ä¸€ä»£ AI åŠ©æ‰‹çš„å®éªŒæ€§é¡¹ç›®ã€‚

è¿™ä¸ªé¡¹ç›®æƒ³å°è¯•ç»“åˆ **Agent æ¨¡å¼** å’Œ **OrbitOS å·¥ä½œæµç®¡ç†** ï¼Œå°†å¤§å‹è¯­è¨€æ¨¡å‹çš„æ¨ç†èƒ½åŠ›èå…¥æˆ‘çš„æ—¥å¸¸å·¥ä½œæµã€‚

**æ ¸å¿ƒç›®æ ‡ï¼š**
æé«˜æˆ‘çš„å­¦ä¹ æ•ˆç‡ï¼Œä½“éªŒVibeCodingï¼Œå¸®æˆ‘æ›¿ä»£ä¸€ä¸‹GeminiCLIå’ŒCopilotï¼Œå¥½ç©

---

## âœ¨ ä¸»è¦ç‰¹æ€§

### 1. æ··åˆå·¥å…·é“¾ä¸ Agent æ¶æ„

- **æ”¯æŒMCP**ï¼šæ”¯æŒ **Model Context Protocol (MCP)** çš„å·¥å…·ï¼Œå› ä¸ºæˆ‘æƒ³è®©DeepSeekä¸Šç½‘ã€‚DeepSeekæœ‰ç½‘ç˜¾ï¼Œè¦è®¾ç½®æç¤ºè¯è®©å®ƒå°‘ç”¨å·¥å…·ã€‚
- **åŸç”Ÿå·¥å…·**ï¼šä½¿ç”¨npxå¯åŠ¨MCPå·¥å…·æœ‰ç‚¹æ…¢ï¼Œæ‰€ä»¥æˆ‘æœ‰åŸç”Ÿçš„å·¥å…·ï¼šread_file,write_file,run_command.
- **å¯æ‹“å±•**ï¼š`mcpHost` é¢„ç•™äº†æ¥å£ï¼Œå¯ä»¥éšæ—¶æ¥å…¥å¤–éƒ¨ MCP æœåŠ¡å™¨

### 2. TUI é£æ ¼ä¸å®æ—¶äº¤äº’

- **è§†è§‰é£æ ¼**ï¼šæˆ‘å¾ˆå–œæ¬¢ GeminiCLI å’Œ ClaudeCode çš„é£æ ¼ï¼Œä½†æ˜¯å› ä¸ºæŠ€æœ¯å¤ªå·®äº†æ¨¡ä»¿ä¸æ¥
- **æµå¼è¾“å‡º**ï¼šDeepSeek APIé‡Œé¢æ¨èçš„ï¼Œè¿˜æ˜¯æ¯”è¾ƒæµç•…
- **æ€è€ƒæµ**ï¼šå¯ä»¥çœ‹åˆ°AIçš„reasoningè¿‡ç¨‹ï¼Œå¸Œæœ›è¿™å¯ä»¥é™ä½å†³ç­–çš„å¤±è¯¯ç‡
- **å…³é”®æ“ä½œ**ï¼šä»¥ä¸‹ä¸¤ä¸ªåŠŸèƒ½æ˜¯æ¨¡ä»¿Copilotçš„ï¼Œå› ä¸ºæˆ‘åšä¸å‡ºæ¥ï¼Œæ‰€ä»¥è§£å†³åŠæ³•å¾ˆåŸå§‹
    - **ç‚¹å‡»ä»£ç å—**ï¼šä¸€é”®å°† AI æä¾›çš„ä»£ç ç‰‡æ®µæ’å…¥åˆ°å½“å‰ç¼–è¾‘å™¨å…‰æ ‡å¤„
    - **Diff å¯¹æ¯”**ï¼šé€šè¿‡ `vscode.diff` å‘½ä»¤ï¼ŒåŸºæœ¬å®ç°äº†å¯¹æ–°æ—§ä»£ç çš„çº¢ç»¿å¯¹æ¯”åŠŸèƒ½(æˆ‘åšä¸å‡ºæ¥Copilotçš„å¯¹æ¯”åŠŸèƒ½)

### 3. å·¥ä½œæµä¸æ•°æ®ç®¡ç†

- **æ–‡ä»¶ç³»ç»Ÿ**ï¼šé€šè¿‡ `initializeWorkspace` åŠŸèƒ½ï¼Œè‡ªåŠ¨åˆ›å»ºäº†ç»“æ„åŒ–çš„å·¥ä½œåŒºç›®å½•ï¼ˆ`codes`, `notes`, `reviews` ç­‰ï¼‰ã€‚
- **å¯¹è¯å†å²**ï¼šå®ç°å¯¹è¯å†å²çš„**æœ¬åœ° JSON æ–‡ä»¶è¯»å†™**ï¼Œä¿è¯æ’ä»¶åœ¨é‡å¯åèƒ½æ¢å¤ä¸Šä¸‹æ–‡ã€‚

---

## âš ï¸ å·²çŸ¥ä¸è¶³ä¸å±€é™æ€§

- **Agent æ€§èƒ½ç“¶é¢ˆ**ï¼šå“åº”é€Ÿåº¦å’Œç¨³å®šæ€§å—é™äº DeepSeek API çš„è®¿é—®é€Ÿåº¦ã€‚(DeepSeekçš„AIå‘³å¤ªå†²äº†)
- **Diff å±€é™**ï¼šç›®å‰çš„ Diff åŠŸèƒ½ä»…ä¸º **ä¾§è¾¹æ å¯¹æ¯”**ï¼Œæœªå®ç° Antigravity/Cursor å¤æ‚çš„ **è¡Œå†… Inline Diff** æ›¿æ¢åŠŸèƒ½ã€‚(æˆ‘éå¸¸æƒ³è¦è¿™ä¸ªåŠŸèƒ½)
- **é”™è¯¯å¤„ç†**ï¼šæœ‰å¾ˆå¤šæˆ‘ä¸çŸ¥é“çš„é”™è¯¯(æˆ‘éšä¾¿ç”¨ä¸€ä¸‹å°±æŠ¥é”™äº†ï¼Œéå¸¸éš¾å—)

---

## âš™ï¸ æ‰©å±•è®¾ç½®

æœ¬æ‰©å±•é€šè¿‡ `contributes.configuration` æä¾›äº†ä»¥ä¸‹è®¾ç½®ï¼š

*   `opengravity.provider`: é€‰æ‹©å¤§è¯­è¨€æ¨¡å‹ï¼ˆ`deepseek` / `gemini`ï¼‰ã€‚Geminiçš„æˆ‘è¿˜æ²¡åšï¼Œä½†æ˜¯å› ä¸ºåŸºæœ¬ä¸Šå¯ä»¥ç”¨äº†ï¼Œæ‰€ä»¥æ‡’å¾—åšäº†
*   `opengravity.apiKey`: API å¯†é’¥ã€‚

## ğŸš€ å¯åŠ¨ä¸è¿è¡Œ

1.  **å®‰è£…**ï¼šé€šè¿‡ VSIX æ–‡ä»¶å®‰è£…æœ¬æ‰©å±•ã€‚
2.  **é…ç½®**ï¼šåœ¨ VS Code è®¾ç½®ä¸­æœç´¢ `Opengravity`ï¼Œè¾“å…¥æ‚¨çš„ API Keyã€‚
3.  **åˆå§‹åŒ–**ï¼šæ‰“å¼€ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œæ’ä»¶å°†æç¤ºæ‚¨è¿›è¡Œå·¥ä½œåŒºåˆå§‹åŒ–ã€‚
4.  **ä½¿ç”¨**ï¼šæ‰“å¼€ä¾§è¾¹æ ï¼Œå¼€å§‹è¾“å…¥æŒ‡ä»¤ã€‚

---

## ğŸ“œ éµå¾ªæŒ‡å—

éµå¾ª VS Code çš„æ‰©å±•æŒ‡å—

---

# ğŸ¤– Opengravity: The TUI AI Personal Workflow System

## âš ï¸ CRITICAL WARNING

Opengravity inspired by @bilibili/MarsLUL's OrbitOS (a productivity framework for Obsidian). **It's obvious that OrbitOS is far more stable and reliable than this extension.**

Opengravity is a small personal project built primarily for **self-use and experimentation**. It has not undergone rigorous validation and undoubtedly contains numerous critical bugs. **I do not have a robust technical background, and most functions were implemented by talking to Gemini, GPT, deepseek(especially confusing one)etc.**

If you are considering integrating Opengravity into your professional workflow, **You'd better not.** This is my toy, not a qualified tool. Feel free to modify it if you appreciate the core idea and believe you can improve it, and if you really considering my project, that just make my day.

---

## ğŸ”¨ Usage

if you're just looking around, feel free to skip this, cause this is boring while following things are funnier.

these directories would be created when you initialize:`codes`ã€`reviews`ã€`notes`ã€`daily`ã€`brainstorm`ã€`todo`
then you can code in codes/, take notes in notes/, write about what did you do today in daily/
LLM will review your codes and put reviews into reviews/, or put a mermaid graph into brainstorm/
you can even start your day by putting things into todo. Using commands as follows:

1. `-codereview <file>` review your code

2. `-brainstorm <file>` expand your thinking

3. `good morning` generate a short todo of today.

4. `-reflect <file>` reflect on your notes

5. `-link` linking your codes brainstorms and notes

6. `-help` 


---

## ğŸ“œ Project Overview

Opengravity is an experimental project in VS Code roughly mimicking the next generation of AI assistants.
which im dying to imagine having one with me when im struggling with my works. and i struggled with this for like weeks but it just changed nothing.

The project attempts to combine **Agent Mode** with **OrbitOS Workflow Management** to integrate the reasoning capabilities of Large Language Models into my daily development routine. but changed nothing.

**Core Objectives:**
To enhance my personal learning efficiency, practice "VibeCoding"(that changed nothing but reducing my coding ability), and serve as a self-made replacement for external tools like Gemini CLI and Copilot. (didnt make it.)

---

## âœ¨ Key Features

### 1. Hybrid Toolchain & Agent Architecture

- **MCP Support**: The system supports the **Model Context Protocol (MCP)** for tools, allowing for potential network-based functions (though DeepSeek requires careful prompting to prevent excessive tool usage).
- **Native Tools**: To avoid the latency of `npx` and external MCP servers, core functions like `read_file`, `write_file`, and `run_command` are implemented **natively** within the extension.
- **Extensibility**: The `mcpHost` architecture remains in place, allowing for seamless future integration of external MCP servers (e.g., dedicated search, database tools).

### 2. TUI Style and Interaction (The Look)

- **Visuals**: **Crudely mimics** the aesthetic of Gemini CLI and ClaudeCode, aiming for a consistent, terminal-style user experience. (didnt make this, too)
- **Streaming Output**: Utilizes the DeepSeek API's streaming functionality for a relatively smooth, real-time output experience.
- **Reasoning Stream**: The AI's **reasoning process** is visible, which helps to mitigate decision-making errors by providing transparency.
- **Key Operations (Copilot Imitation)**:
    - **Click-to-Insert**: Implemented a function to quickly insert AI-provided code snippets into the editor at the cursor position.
    - **Diff Comparison**: Achieves a basic **red/green diff comparison** via the `vscode.diff` command (A **humble approximation** of the true inline Copilot experience, which I could not fully reproduce).

### 3. Workflow and Data Management

- **File System Initialization**: The `initializeWorkspace` function automatically creates the structured directory system (`codes`, `notes`, `reviews`, etc.) upon opening a new workspace.
- **Context Persistence**: Dialogue history is stored via **local JSON file I/O**, ensuring the chat context is retained even after restarting the IDE.

---

## âš ï¸ Known Issues and Limitations

- **Agent Performance/Bias**: The AI's responsiveness and stability are inherently limited by the DeepSeek API's access speed and tendency towards excessive tool usage.
- **Diff Limitation**: The current Diff function is **external** (opens a side-by-side view) and lacks complex **inline replacement** functionality. (This is the feature I most wanted to implement.)
- **Bugs/Error Handling**: Due to the experimental nature of the project and the developer's limited technical background, **the codebase likely contains undiscovered bugs** that may cause unexpected failures.
- **Provider Status**: The `Gemini` provider option is currently unimplemented, though the architecture is ready.

---

## âš™ï¸ Extension Settings

This extension contributes the following settings via `contributes.configuration`:

*   `opengravity.provider`: Selects the Large Language Model provider (`deepseek` is currently functional; `gemini` is unimplemented).
*   `opengravity.apiKey`: Your API Key.

## ğŸš€ Getting Started

1.  **Install**: Install the extension via VSIX file.
2.  **Configure**: Search for `Opengravity` in VS Code settings and input your API Key.
3.  **Initialize**: Open a folder; the extension will prompt you to initialize the necessary file structure.
4.  **Use**: Open the sidebar and begin your dialogue.
